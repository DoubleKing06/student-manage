<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.edu.cwnu.studentmanage.dao.StudentPingjiangDaoVO">

	
	<!-- 其它SQL语句 -->
	<sql id="QUERY_COLUMN_LIST_VO">
		student_basic_info.xuehao,student_basic_info.`name`,student_basic_info.banji,student_pingjiang.id,student_pingjiang.student_id AS studentId,student_pingjiang.xueqi,student_pingjiang.jiangxuejin,student_pingjiang.danxiangjiangxuejin,student_pingjiang.xueyou,student_pingjiang.tuanyou,student_pingjiang.yxdxbys,student_pingjiang.dxxx FROM student_basic_info JOIN student_pingjiang ON student_basic_info.id=student_pingjiang.student_id 
	</sql>
	
	
	<!-- 全部条件(更多功能可以通过queryData扩展实现)  -->
	<sql id="QUERY_WHERE_CLAUSE_VO">
		<where>
			<if test="id != null and id != ''"><![CDATA[AND student_pingjiang.id = #{id}]]></if>
			<if test="studentId != null and studentId != ''"><![CDATA[AND student_pingjiang.student_id = #{studentId}]]></if>
			<if test="xuehao != null and xuehao != ''"><![CDATA[AND student_basic_info.xuehao like concat('%',#{xuehao},'%')]]></if>
			<if test="name != null and name != ''"><![CDATA[AND student_basic_info.name like concat('%',#{name},'%')]]></if>
			<if test="xueqi != null and xueqi != ''"><![CDATA[AND student_pingjiang.xueqi like concat('%',#{xueqi},'%')]]></if>
			<if test="jiangxuejin != null and jiangxuejin != ''"><![CDATA[AND student_pingjiang.jiangxuejin like concat('%',#{jiangxuejin},'%')]]></if>
			<if test="danxiangjiangxuejin != null and danxiangjiangxuejin != ''"><![CDATA[AND student_pingjiang.danxiangjiangxuejin like concat('%',#{danxiangjiangxuejin},'%')]]></if>
			<if test="xueyou != null and xueyou != ''"><![CDATA[AND student_pingjiang.xueyou like concat('%',#{xueyou},'%')]]></if>
			<if test="tuanyou != null and tuanyou != ''"><![CDATA[AND student_pingjiang.tuanyou like concat('%',#{tuanyou},'%')]]></if>
			<if test="yxdxbys != null and yxdxbys != ''"><![CDATA[AND student_pingjiang.yxdxbys like concat('%',#{yxdxbys},'%')]]></if>
			<if test="dxxx != null and dxxx != ''"><![CDATA[AND student_pingjiang.dxxx like concat('%',#{dxxx},'%')]]></if>
			<if test="updateTime != null and updateTime != ''"><![CDATA[AND student_pingjiang.update_time like concat('%',#{updateTime},'%')]]></if>
			<if test="banji != null and banji != ''"><![CDATA[AND student_basic_info.banji like concat('%',#{banji},'%')]]></if>
		</where>
	</sql>
	
	
	
	
		<!-- 智能排序与分页 -->
	<sql id="QUERY_ORDER_LIMIT_CONDTION">
		<if test="orderField != null and orderField != '' and orderFieldType != null and orderFieldType != ''"><![CDATA[ORDER BY ${orderField} ${orderFieldType}]]></if>
		<if test="startIndex != null and startIndex &gt;= 0 and pageSize != null and pageSize &gt; 0"><![CDATA[LIMIT #{startIndex},#{pageSize}]]></if>
	</sql>
	
		<!-- 查询,通过条件 -->
	<select id="selectEntryList" parameterType="studentPingjiangVO" resultType="studentPingjiangVO">
		<![CDATA[SELECT]]>
		<include refid="QUERY_COLUMN_LIST_VO"/>
		<include refid="QUERY_WHERE_CLAUSE_VO"/>
		<include refid="QUERY_ORDER_LIMIT_CONDTION"/>
	</select>

	<!-- 总数查询,通过条件 -->
	<select id="selectEntryListCount" parameterType="studentChengjiVO" resultType="int">
		<![CDATA[SELECT COUNT(student_pingjiang.id) AS dataCount FROM student_basic_info JOIN student_pingjiang ON student_basic_info.id=student_pingjiang.student_id]]>
		<include refid="QUERY_WHERE_CLAUSE_VO"/>
	</select>
	
	
	
</mapper>